# Sprent-et-al-Guard-cell-starch-degradation
The supporting files and code for the Sprent et al 2020 paper titled "Optimal carbon use efficiency during stomatal opening requires guard cell starch degradation for provision of both osmotica and energy"

Here the code is provided as a series of Jupyter notebooks which contain all the scripts use to generate the results of the paper. The code is written in Python 2.7 using the COBRApy Package 0.16.0. In order to run the code you must have Jupyter, which comes bundled with the anaconda python distribution, COBRApy and libsbml. COBRApy and libsbml can be installed by running -pip install cobrapy and -pip install python-libsbml in a python terminal. You also need to install the custom functions used to run much of the code in the jupyter notebooks, you can do this by opening a python terminal in the \functions folder of the repository and running - pip install .

Although the code has already been run in this repository for your convenience, if you want to delete the results folder and regenerate the results you should begin by running [SUPPLEMENTARY] 1 - Building Model, before running any of the figure notebooks.  

NB - Some of the figures seen in the paper were slightly edited for clarity in vector graphics software after being generated using the scripts in this repository. For example, the dashed lines in the osmolyte plots when two osmolytes followed the same pattern.

## Index  
- [MAIN] Figure 2.ipynb - The script used to generate figure 2 and the results found in \Results\figure2
- [MAIN] Figure 3.ipynb - The script used to generate figure 3 and the results found in \Results\figure3
- [MAIN] Figure 4.ipynb - The script used to generate figure 4 and the results found in \Results\figure4
- [MAIN] Figure 6.ipynb - The script used to generate figure 6 and the results found in \Results\figure6
- [SUPPLEMENTARY] 1 - Buildingmodel.ipynb - The script used to generate the guard cell model from PlantCoreMetabolism_v1_2_2.xml
- functions - This folder contains the custom functions, called "cobrafunctions" used to execute the code for the paper
  - cobrafunctions
    - adjustedcobrafunctions.py - This file contains functions which are modified versions of the ones present in the COBRApy package
    - analysing.py - This file contains the functions used to analyse the model, such as those for generating figures
    - buildingediting.py - This file contains the functions used to build the model
- Inputs - This folder contains the inputs used for generating the model and for generating results
  - 4_stage_GC.xml - The model file for the final guard cell model
  - charges.csv - The csv file used to update the core model with charges
  - osmolytes.csv - The csv file that defines which linker reactions the model uses and whether these contribute to an osmotic constraint.
- Models - This folder contains the models used in the paper
  - 4_stage_GC.xml - The final guard cell model
  - PlantCoreMetabolism_v1_2_2.xml - The original core model used to generate the guard cell model
- Results - This folder contains the results calculated from each figure script. The inputs folder in each subfolder is auto-generated each time the notebook is run from the \Inputs folder in the main
  - figure2
    - figure2.svg - Plot of osmolytes over the diel cycle in the minimally-constrained model
    - modelsolutions.csv - A csv that contains the fluxes in the minimally-constrained model when solved with and without the aperture constrained
  - figure3
    - figure3.svg - The parallel coordinate plot of the multifactorial constraint scan
    - figure3s1.svg - The parallel coordinate plot separated by the osmolytes that were limiting
    - realisticsolution.csv - A csv that contains the fluxes in the solution to the 'realistically-constrained' model
    - scanarray.csv - A csv that contains the array of constraints used in the multifactorial constraint scan
    - scansolutions.csv - A csv that contains the fluxes of all of the models generated by the constraint scan
  - figure4
    - figure4.svg - Comparison of osmolytes over the diel cycle in the realistic model and starch knockout model
    - modelsolutions.csv - A csv that contains the fluxes in the realistic model and the starch knockout model
  - figure6
    - energycomparison.xlsx - An excel file used to calculate the ATP production in the models
    - figure6.png - A png of figure6 used in the final paper as the .svg did not display the hatching on the cytoplasm bar properly
    - figure6.svg - A figure displaying osmolyte source and energy source in the model
